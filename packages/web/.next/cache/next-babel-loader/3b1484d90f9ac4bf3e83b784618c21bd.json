{"ast":null,"code":"import puppeteer from 'puppeteer';\nexport default class Scrapper {\n  static async getPageHTML(url, date = null) {\n    const browser = await puppeteer.launch();\n    const page = await browser.newPage();\n    await page.goto(url, {\n      waitUntil: 'networkidle2'\n    });\n\n    if (date) {\n      this.changeDateFifaArena(date, page);\n    }\n\n    const content = await page.content();\n    await browser.close();\n    return content;\n  }\n\n  static async getJSONData(url, date = null) {\n    const browser = await puppeteer.launch();\n    const page = await browser.newPage();\n    await page.goto('http://stats.cyberarena.live/results.aspx?tab=fifa21', {\n      waitUntil: 'networkidle2'\n    });\n\n    if (date) {\n      await page.evaluate(() => {\n        const date_input = document.getElementById(\"tb_date\");\n        date_input.value = date;\n      });\n    }\n\n    const content = await page.content();\n    await browser.close();\n    return content;\n  }\n\n  static async changeDateFifaArena(day = null, page) {\n    const id = 'tb_date';\n\n    try {\n      const datePage = await page.findElement(By.name(id)).getAttribute('value');\n\n      if (datePage !== day) {\n        driver.executeScript(`document.getElementById('${id}').value='${day}'`);\n        await driver.findElement(By.name(id)).sendKeys(Key.RETURN);\n      }\n    } finally {\n      return driver.getPageSource();\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/mel/Desktop/brother.bet/packages/web/src/pages/api/BotFifaArena/Scrapper.js"],"names":["puppeteer","Scrapper","getPageHTML","url","date","browser","launch","page","newPage","goto","waitUntil","changeDateFifaArena","content","close","getJSONData","evaluate","date_input","document","getElementById","value","day","id","datePage","findElement","By","name","getAttribute","driver","executeScript","sendKeys","Key","RETURN","getPageSource"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,WAAtB;AAEA,eAAe,MAAMC,QAAN,CAAe;AACJ,eAAXC,WAAW,CAACC,GAAD,EAAMC,IAAI,GAAG,IAAb,EAAmB;AACzC,UAAMC,OAAO,GAAG,MAAML,SAAS,CAACM,MAAV,EAAtB;AACA,UAAMC,IAAI,GAAG,MAAMF,OAAO,CAACG,OAAR,EAAnB;AACA,UAAMD,IAAI,CAACE,IAAL,CAAUN,GAAV,EAAe;AAAEO,MAAAA,SAAS,EAAE;AAAb,KAAf,CAAN;;AAEA,QAAGN,IAAH,EAAQ;AACN,WAAKO,mBAAL,CAAyBP,IAAzB,EAA+BG,IAA/B;AACD;;AAED,UAAMK,OAAO,GAAG,MAAML,IAAI,CAACK,OAAL,EAAtB;AAEA,UAAMP,OAAO,CAACQ,KAAR,EAAN;AACA,WAAOD,OAAP;AACD;;AAEuB,eAAXE,WAAW,CAACX,GAAD,EAAMC,IAAI,GAAG,IAAb,EAAmB;AACzC,UAAMC,OAAO,GAAG,MAAML,SAAS,CAACM,MAAV,EAAtB;AACA,UAAMC,IAAI,GAAG,MAAMF,OAAO,CAACG,OAAR,EAAnB;AACA,UAAMD,IAAI,CAACE,IAAL,CAAU,sDAAV,EAAkE;AAACC,MAAAA,SAAS,EAAE;AAAZ,KAAlE,CAAN;;AAEA,QAAGN,IAAH,EAAQ;AACN,YAAMG,IAAI,CAACQ,QAAL,CAAc,MAAM;AACxB,cAAMC,UAAU,GAAGC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAnB;AACAF,QAAAA,UAAU,CAACG,KAAX,GAAmBf,IAAnB;AACD,OAHK,CAAN;AAID;;AAED,UAAMQ,OAAO,GAAG,MAAML,IAAI,CAACK,OAAL,EAAtB;AACA,UAAMP,OAAO,CAACQ,KAAR,EAAN;AAEA,WAAOD,OAAP;AACD;;AAE+B,eAAnBD,mBAAmB,CAACS,GAAG,GAAG,IAAP,EAAab,IAAb,EAAmB;AACjD,UAAMc,EAAE,GAAG,SAAX;;AACA,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMf,IAAI,CAACgB,WAAL,CAAiBC,EAAE,CAACC,IAAH,CAAQJ,EAAR,CAAjB,EAA8BK,YAA9B,CAA2C,OAA3C,CAAvB;;AACA,UAAIJ,QAAQ,KAAKF,GAAjB,EAAsB;AACpBO,QAAAA,MAAM,CAACC,aAAP,CAAsB,4BAA2BP,EAAG,aAAYD,GAAI,GAApE;AACA,cAAMO,MAAM,CAACJ,WAAP,CAAmBC,EAAE,CAACC,IAAH,CAAQJ,EAAR,CAAnB,EAAgCQ,QAAhC,CAAyCC,GAAG,CAACC,MAA7C,CAAN;AACD;AACF,KAND,SAMU;AACR,aAAOJ,MAAM,CAACK,aAAP,EAAP;AACD;AACF;;AA7C2B","sourcesContent":["import puppeteer from 'puppeteer'\n\nexport default class Scrapper {\n  static async getPageHTML(url, date = null) {\n    const browser = await puppeteer.launch()\n    const page = await browser.newPage()\n    await page.goto(url, { waitUntil: 'networkidle2' })\n\n    if(date){\n      this.changeDateFifaArena(date, page);\n    }\n\n    const content = await page.content();\n\n    await browser.close()\n    return content\n  }\n\n  static async getJSONData(url, date = null) {\n    const browser = await puppeteer.launch();\n    const page = await browser.newPage();\n    await page.goto('http://stats.cyberarena.live/results.aspx?tab=fifa21', {waitUntil: 'networkidle2'});\n\n    if(date){\n      await page.evaluate(() => {\n        const date_input = document.getElementById(\"tb_date\");\n        date_input.value = date;\n      })\n    }\n\n    const content = await page.content();\n    await browser.close();\n\n    return content;\n  }\n\n  static async changeDateFifaArena(day = null, page) {\n    const id = 'tb_date';\n    try {\n      const datePage = await page.findElement(By.name(id)).getAttribute('value');\n      if (datePage !== day) {\n        driver.executeScript(`document.getElementById('${id}').value='${day}'`);\n        await driver.findElement(By.name(id)).sendKeys(Key.RETURN);\n      }\n    } finally {\n      return driver.getPageSource();\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}