{"ast":null,"code":"import puppeteer from 'puppeteer';\nexport default class Scrapper {\n  static async getPageHTML(url, date = null) {\n    const browser = await puppeteer.launch();\n    const page = await browser.newPage();\n    await page.goto(url, {\n      waitUntil: 'networkidle2'\n    });\n    const content = await page.content();\n    await browser.close();\n    return content;\n  }\n\n  static async getJSONData(url, date = null) {\n    const browser = await puppeteer.launch();\n    const page = await browser.newPage();\n    await page.goto('http://stats.cyberarena.live/results.aspx?tab=fifa21', {\n      waitUntil: 'networkidle2'\n    });\n\n    if (date) {\n      this.changeDateFifaArena;\n    }\n\n    const content = await page.evaluate(() => {\n      const lines = [];\n      const rows = Array.from(document.querySelectorAll('div > table > tbody > tr + tr'));\n      rows.map((item, index) => {\n        if (index > 0 && item.innerText.split(':').length === 4) {\n          const arrayLine = item.innerText.split('\\t');\n          const link = item.querySelector('td > a');\n          lines.push({\n            time: arrayLine[0],\n            video: link.getAttribute('href'),\n            teamA: {\n              team: arrayLine[1],\n              user: arrayLine[2],\n              firstHalf: arrayLine[3].split(' ')[0],\n              secondHalf: arrayLine[3].split(' ')[1]\n            },\n            teamB: {\n              team: arrayLine[4],\n              user: arrayLine[5],\n              firstHalf: arrayLine[3].split(' ')[0],\n              secondHalf: arrayLine[3].split(' ')[1]\n            }\n          });\n        }\n      });\n      return lines;\n    });\n    await browser.close();\n    return content;\n  }\n\n  static async changeDateFifaArena(day = null, driver) {\n    const id = 'tb_date';\n\n    try {\n      const datePage = await driver.findElement(By.name(id)).getAttribute('value');\n\n      if (datePage !== day) {\n        driver.executeScript(`document.getElementById('${id}').value='${day}'`);\n        await driver.findElement(By.name(id)).sendKeys(Key.RETURN);\n      }\n    } finally {\n      return driver.getPageSource();\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/mel/Desktop/brother.bet/packages/web/src/pages/api/BotFifaArena/Scrapper.js"],"names":["puppeteer","Scrapper","getPageHTML","url","date","browser","launch","page","newPage","goto","waitUntil","content","close","getJSONData","changeDateFifaArena","evaluate","lines","rows","Array","from","document","querySelectorAll","map","item","index","innerText","split","length","arrayLine","link","querySelector","push","time","video","getAttribute","teamA","team","user","firstHalf","secondHalf","teamB","day","driver","id","datePage","findElement","By","name","executeScript","sendKeys","Key","RETURN","getPageSource"],"mappings":"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","sourcesContent":["import puppeteer from 'puppeteer'\n\nexport default class Scrapper {\n  static async getPageHTML(url, date = null) {\n    const browser = await puppeteer.launch()\n    const page = await browser.newPage()\n    await page.goto(url, { waitUntil: 'networkidle2' })\n\n    const content = await page.content();\n\n    await browser.close()\n    return content\n  }\n\n  static async getJSONData(url, date = null) {\n    const browser = await puppeteer.launch();\n    const page = await browser.newPage();\n    await page.goto('http://stats.cyberarena.live/results.aspx?tab=fifa21', {waitUntil: 'networkidle2'});\n\n    if(date){\n      this.changeDateFifaArena\n    }\n\n    const content = await page.evaluate(() => {\n      const lines = [];\n      const rows = Array.from(document.querySelectorAll('div > table > tbody > tr + tr'));\n\n      rows.map((item, index) => {\n        if (index > 0 && item.innerText.split(':').length === 4) {\n          const arrayLine = item.innerText.split('\\t');\n          const link = item.querySelector('td > a');\n          lines.push({\n            time: arrayLine[0],\n            video: link.getAttribute('href'),\n            teamA: {\n              team: arrayLine[1],\n              user: arrayLine[2],\n              firstHalf: arrayLine[3].split(' ')[0],\n              secondHalf: arrayLine[3].split(' ')[1],\n            },\n            teamB: {\n              team: arrayLine[4],\n              user: arrayLine[5],\n              firstHalf: arrayLine[3].split(' ')[0],\n              secondHalf: arrayLine[3].split(' ')[1],\n            },\n          });\n        }\n      });\n\n      return lines;\n    });\n    await browser.close();\n\n    return content;\n  }\n\n  static async changeDateFifaArena(day = null, driver) {\n    const id = 'tb_date';\n    try {\n      const datePage = await driver.findElement(By.name(id)).getAttribute('value');\n      if (datePage !== day) {\n        driver.executeScript(`document.getElementById('${id}').value='${day}'`);\n        await driver.findElement(By.name(id)).sendKeys(Key.RETURN);\n      }\n    } finally {\n      return driver.getPageSource();\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}